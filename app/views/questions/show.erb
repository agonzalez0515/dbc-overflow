<%= erb :'/partials/_header', layout: false %>

<h1>Question:<%=@question.title%></h1>
<p>
    <%=@question.body%>
</p>
<p>
    <!-- these are the comments with the question id -->
    <h6>Comments:<br>
        <ul>
            <%@question_comments.each do |comment|%>
            <li><%=comment.body%></li>
            <!--should this go in controller or model?-->
            -
            <%=User.find(comment.user_id).username%>
            <%end%>
        </ul>
    </h6>
    Add a comment:
    <form method='POST' action='/comments'>
        <input type='hidden' name='question_id' value=<%= @question.id %>>
        <input type='hidden' name='commentable_type' value='Question'>
        <input type='text' name='comment' placeholder='comment'>
        <input type='submit' value='Submit'>
    </form>
</p>

<p>
    <h2>Answers:<%@question_answers.each do |answer| %></h2>
    <ul>
        <li><%=answer.body%></li>
        <!--should this go in controller or model?-->
        -
        <%=User.find(answer.user_id).username%>
    </ul>
    <p>
        <!-- these are the comments with the answer id -->
        <h6>Comments:<br>
            <ul>
                <%comments_to_answer = Comment.where(commentable_id: answer.id, commentable_type: Answer)%>
                <%comments_to_answer.each do |comment|%>
                <li><%=comment.body%></li>
                <!--should this go in controller or model?-->
                -
                <%=User.find(comment.user_id).username%>
                <%end%>
                <br>
                Add a comment to this answer:
                <form method='POST' action='/answers/<%=answer.id%>/comments'>
                    <input type='hidden' name='answer_id' value=<%= answer.id %>>
                    <input type='hidden' name='commentable_type' value='Answer'>
                    <input type='text' name='body' placeholder='comment'>
                    <input type='submit' value='Submit'>
                </form>
                <br>
                <%end%>
            </ul>
        </h6>
    </p>

    <p>
        Provide an answer:<br>
        <form method='POST' action='/answers'>
            <input type='text' name='body' placeholder='answer'>
            <input type='hidden' name='question_id' value=<%= @question.id %> >
            <input type='submit' value='Submit'>
        </form>
    </p>
